<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
<head>
  <script>
    var isProduction = window.location.hostname === 'developer.okta.com';
    if (isProduction) {
      // TypeKit
      (function(d) {
        var config = {
          kitId: 'jff5neq',
          scriptTimeout: 3000,
          async: true
        },
        h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
      })(document);

      // Google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-15777010-3', 'auto');
      ga('send', 'pageview');
    }
	</script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 	
  <link type="text/css" rel="stylesheet" href="/assets/animate-ec43d72c3ed45e08a460b8a2966d8dba6006aebfa0530935c3973fa493a8771f.css">
  <link type="text/css" rel="stylesheet" href="/assets/okta-fe3337502d4360bcb36814ced8dd4f88ec4c9e7d7a0be6fa2995c3524314aa7d.css">
  
  
  <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/favicon.ico">
  <title>Configuration Changes Required for API Access Management Beta Update | Okta Developer</title>
  <meta name="description" content="Configuration Changes Required for API Access Management Beta Update">
  <link rel="canonical" href="https://developer.okta.com/docs/api/resources/resource-server-beta/required-config-changes-for-auth-server.html">
  <link rel="alternate" type="application/rss+xml" title="Okta Developer" href="https://developer.okta.com/feed.xml"><!-- GA -->
</head>

<body>
  <div class="Page configuration-changes-required-for-api-access-management-beta-update">
    <!-- START Header -->
    <header id="header">
      <div class="Wrap">
        <h1 class="logo"><a href="/">Okta</a></h1><!-- START Primary Nav -->
        <nav>
          <div id="top-nav">
            <a href="#" id="mobile-close" class="mobile-toggle">
              <span></span>
              <span></span>
            </a>
            <a class="Button--green" href="https://developer.okta.com/signup/" id="top-nav-cta">Get Started</a>
            <a class="SearchIcon" href="#"></a>
            <ul>
              <li>
                <a href="/product/">Product</a>
              </li>
              <li>
                <a href="/documentation/">Documentation</a>
              </li>
              <li>
                <a href="/code/">Code</a>
              </li>
              <li class="has-dropdown">
                <a href="#">Support</a>
                <div class="dropdown-window">
                  <p class="devforum">Post your question on <a href="https://devforum.okta.com/" title="Okta Developer Forums" target="_blank">Okta Developer Forums</a></p>
                  <p class="email">Email us:<br>
                  <a href="mailto:developers@okta.com">developers@okta.com</a></p>
                  <p class="tel">Call us:<br>
                  <a href="tel:18887227871">1 (888) 722-7871</a></p>
                </div>
              </li>
            </ul>
            <form id="form_search" method="get" action="/search/" name="form_search">
              <input type="text" name="q" id="q" autocomplete="off">
            </form>
          </div>
          <div id="mobile-nav">
            <a id="mobile-search" href="/search/"><span class="icon-search-light"></span></a>
            <a id="mobile-open" class="mobile-toggle" href="#top-nav">
              <span></span>
              <span></span>
              <span></span>
            </a>
          </div>
        </nav><!-- END Primary Nav -->
      </div>
    </header><!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>
      if (isProduction) {
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-TJ45R6');
      }
    </script> <!-- End Google Tag Manager -->
     <!-- END Header -->
     <!-- START Page Center w/Sub Nav & Content -->
    <section class="PageContent DynamicSidebar has-tableOfContents">
      <!-- START Fixed sidebar --><aside class="Sidebar">
        <h2 class="Sidebar-location Sidebar-toggle h6">Navigation</h2>
        <div class="Sidebar-close Sidebar-toggle"></div>
        <div>
          <h3 class="Sidebar-title">Use Cases</h3>
          <ul class="Sidebar-nav">
            <li>
              <a href="/use_cases/authentication/">Authentication</a>
            </li>
            <li>
              <a href="/use_cases/mfa/">Multi-Factor Authentication</a>
            </li>
            <li>
              <a href="/use_cases/api_access_management/">API Access Management</a>
            </li>
            <li>
              <a href="/use_cases/integrate_with_okta/">Integrate with Okta</a>
            </li>
          </ul>
          <h3 class="Sidebar-title">Reference</h3>
          <ul class="Sidebar-nav">
            <li>
              <a href="/docs/api/getting_started/api_test_client.html">Getting Started</a>
            </li>
            <li>
              <a href="/docs/api/resources/authn.html">Authentication Reference</a>
              <ul id="Sidebar_References" class="Sidebar-hide">
                <li><a href="/docs/api/resources/authn.html">Authentication API</a></li>
                <li><a href="/docs/api/resources/oauth2.html">OAuth 2.0 API</a></li>
                <li><a href="/docs/api/resources/oidc.html">OpenID Connect API</a></li>
                <li><a href="/docs/api/resources/social_authentication.html">Social Login</a></li>
                <li><a href="/docs/api/resources/sessions.html">Sessions API</a></li>
                <li><a href="/docs/api/resources/oauth-clients.html">OAuth 2.0 Clients Registration API</a></li>
              </ul>
            </li>
            <li>
              <a href="/docs/api/resources/apps.html">API Reference</a>
              <ul id="Sidebar_Resources" class="Sidebar-hide">
                <li><a href="/docs/api/resources/apps.html">Apps</a></li>
                <li><a href="/docs/api/resources/events.html">Events</a></li>
                <li><a href="/docs/api/resources/factors.html">Factors</a></li>
                <li><a href="/docs/api/resources/groups.html">Groups</a></li>
                <li><a href="/docs/api/resources/idps.html">Identity Providers</a></li>
                <li><a href="/docs/api/resources/policy.html">Policy</a></li>
                <li><a href="/docs/api/resources/roles.html">Admin Roles</a></li>
                <li><a href="/docs/api/resources/schemas.html">Schemas API</a></li>
                <li><a href="/docs/api/resources/system_log.html">System Log (Beta)</a></li>
                <li><a href="/docs/api/resources/templates.html">Templates</a></li>
                <li><a href="/docs/api/resources/users.html">Users</a></li>
              </ul>
            </li>
            <li>
              <a href="/reference/error_codes/">Error Codes</a>
            </li>
            <li>
              <a href="/reference/okta_expression_language/">Okta Expression Language</a>
            </li>
            <li>
              <a href="/docs/platform-release-notes/platform-release-notes.html">Platform Release Notes</a>
            </li>
          </ul>

          <h3 class="Sidebar-title">Standards</h3>
          <ul class="Sidebar-nav">
            
            
            
            <li>
              <a href="/standards/OAuth/">OAuth 2.0 and Okta</a>
            </li>
            
            
            <li>
              <a href="/standards/OIDC/">OpenID Connect and Okta</a>
            </li>
            
            
            
            <li>
              <a href="/standards/SAML/">SAML</a>
            </li>
            
            
            
            
            <li>
              <a href="/standards/SCIM/">SCIM Provisioning with Lifecycle Management</a>
            </li>
            
          </ul>
          <script>
            if (document.querySelectorAll("#Sidebar_Resources .is-active").length) {
                document.getElementById('Sidebar_Resources').classList.remove('Sidebar-hide');
            }

            if (document.querySelectorAll("#Sidebar_References .is-active").length) {
                document.getElementById('Sidebar_References').classList.remove('Sidebar-hide');
            }
          </script>
        </div>
      </aside>
<!-- END Fixed sidebar -->
      <!-- START Page Content -->
      <div class="PageContent-main" id="docs-body">
        <a id="edit-link" href="https://github.com/okta/okta.github.io/edit/master/_source/_docs/api/resources/resource-server-beta/required-config-changes-for-auth-server.md">Edit Page</a>
      <h1 id="configuration-changes-required-for-api-access-management-beta-update">Configuration Changes Required for API Access Management Beta Update</h1>

<blockquote>
  <p>API Access Management is a  <a href="/docs/api/getting_started/releases-at-okta.html#beta"> <span class="api-label api-label-beta "> <i class="fa fa-warning"></i> Beta </span> </a>  feature.</p>
</blockquote>

<p>Okta provides a private authorization server for OAuth 2.0 (Beta).
However, with release 2016.45, you can use a shared authorization server instead, which provides several benefits:</p>

<ul>
  <li><strong>Many-to-Many Instead of One-to-One</strong>—You created a separate private authorization server for each client, which required you to set scopes and claims
and group filters for each client on a separate server, but keeping many configurations in sync is challenging.
With the shared authorization server, you can create a single configuration of scopes, claims, and group filters, and
assign multiple clients.</li>
  <li><strong>Targeting the Audience</strong>—With the shared authorization server, you can scope the set of resources you want to protect.
When you bring a new client online, you can choose which combination of services it can use by choosing the
appropriate authorization server and policies. This ensures that access is being granted with the same permissions
(scopes) without having to recreate the permissions for each new client.</li>
</ul>

<p>Since a shared authorization server meets the same needs as the current private authorization server,
we are deprecating the private authorization server. All orgs using the private authorization server must create
a shared authorization server and manually transfer their OAuth 2.0 configuration information
using the instructions provided.</p>

<blockquote>
  <p>Do this within two weeks after preview release 2016.45 is available on November 9, 2016.
After November 23, 2016, the private authorization server and all configuration information for it (scopes, claims, and groups claims)
will be removed, so be sure to recreate your configurations in the shared authorization server before this date.</p>
</blockquote>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>You are an OAuth 2.0 Beta program participant or and OpenID Connect Early Access program participant, and you have existing scope,
claim, or group claim configurations set up for either OpenID Connect ID Token or OAuth 2.0 Access Token, and want to keep these configurations.</li>
  <li>You have Admin access to the org where the private authorization server is set up. You need this access
to collect the existing information and manually transfer it to the new shared authorization server that you will create.</li>
</ul>

<h2 id="instructions">Instructions</h2>

<p>To move from the private authorization server to the shared authorization server:</p>

<ol>
  <li><a href="#step-one-create-a-new-authorization-server">Create a new Authorization Server.</a></li>
  <li><a href="#step-two-copy-your-configuration">Copy your scopes, claims, and group claims configurations to the new authorization server.</a></li>
  <li><a href="#step-three-create-policies-and-rules">Create the policy and rules for your client apps.</a></li>
  <li><a href="#step-four-test-your-configuration">Test your shared authorization server configuration.</a></li>
  <li><a href="#step-five-change-your-clients-to-consume-the-new-endpoints">Change your clients to use the new endpoints.</a></li>
</ol>

<h3 id="step-one-create-a-new-authorization-server">Step One: Create a New Authorization Server</h3>

<p>In the Okta user interface, create a new authorization server:</p>

<ol>
  <li>In the Okta Admin user interface, go to <strong>Security &gt; API</strong>.</li>
  <li>Click <strong>Add Authorization Server</strong>.</li>
  <li>Enter a unique name that indicates the purpose of this authorization server.</li>
  <li>Enter the <strong>Resource URI</strong>, your base URL for the resources you are storing in the authorization server.
For example, if your resource is <code class="highlighter-rouge">http://mycorp.mydomain.com/api/cats</code>, the resource URI is <code class="highlighter-rouge">http://mycorp.mydomain.com/api/cats</code>.
This value becomes the <code class="highlighter-rouge">audience</code> in the Access Token.</li>
  <li>Select <strong>Save</strong>.</li>
</ol>

<p>Repeat for as many authorization servers as you need to create.</p>

<h3 id="step-two-copy-your-configuration">Step Two: Copy Your Configuration</h3>

<p>Copy the custom scopes, custom claims, and group claims configuration from the private authorization server
to the shared authorization server:</p>

<p>For ID Tokens:</p>

<ol>
  <li>Navigate to <strong>Applications &gt; Applications</strong> and select an app.</li>
  <li>Select <strong>Sign On</strong>.</li>
  <li>Collect all information about the <strong>OpenID Connect ID Token</strong>: <code class="highlighter-rouge">Claims</code> and <code class="highlighter-rouge">Groups claim</code>.
    <ul>
      <li>The <code class="highlighter-rouge">issuer</code> and <code class="highlighter-rouge">audience</code> will change, so you don’t need to record them.</li>
      <li>If you have a groups claim, collect the information for step 8.</li>
    </ul>
  </li>
  <li>Select <strong>Security &gt; API</strong>.</li>
  <li>Select an authorization server name.</li>
  <li>Select <strong>Scopes</strong> and add any of the scopes you collected. Create a scope for groups if you had a groups claim in the private authorization server.</li>
  <li>Select <strong>Claims</strong> and add any of the claims you collected.</li>
  <li>If you had a Groups claim (see step 3), create a claim in the shared authorization server with a group filter, then link it
      with a scope. The <code class="highlighter-rouge">groups</code> scope is not a reserved scope in the shared authorization server.</li>
</ol>

<blockquote>
  <p>The shared authorization server only supports automatic token credentials, so you can ignore the <strong>Token Credentials</strong> field.</p>
</blockquote>

<p>For Access Tokens:</p>

<ol>
  <li>Navigate to <strong>Applications &gt; Applications</strong> and select an app.</li>
  <li>Select <strong>Authorization Server</strong>.</li>
  <li>Collect all the information about <strong>OAuth 2.0 Access Token</strong>: custom <code class="highlighter-rouge">Scopes</code>, <code class="highlighter-rouge">Claims</code>, and <code class="highlighter-rouge">Groups claim</code>.
    <ul>
      <li>The <code class="highlighter-rouge">issuer</code> and <code class="highlighter-rouge">audience</code> will change, so you don’t need to record them.</li>
      <li>If you have a groups claim, collect the information for step 8.</li>
    </ul>
  </li>
  <li>Select <strong>Security &gt; API</strong></li>
  <li>Select your authorization server name.</li>
  <li>Select <strong>Scopes</strong> and add any of the scopes you copied in step 2.</li>
  <li>Select <strong>Claims</strong> and add any of the claims you copied in step 2.</li>
  <li>If you had a Groups claim (see step 3), create a claim in the shared authorization server with a group filter, then link it
      with a scope. The <code class="highlighter-rouge">groups</code> scope is not a reserved scope in the shared authorization server.</li>
</ol>

<blockquote>
  <p>Hint: Instead of copying strings from the UI to a text document, you can take screenshots, or open two browsers, one accessing
 the old configuration (steps 1-4), and one showing the new configuration (steps 5-8).</p>
</blockquote>

<h3 id="step-three-create-policies-and-rules">Step Three: Create Policies and Rules</h3>

<p>The final configuration step is to create access policies for your new authorization server.
The private authorization server provided a single default access policy that allows all
the assigned users to receive all the scopes and claims.
The shared authorization server allows you to control which clients and users receive which scopes and claims, so you must set the access policy
to ensure behavior is the same between private and shared authorization server.</p>

<p>To copy the default access policy from the private authorization server, create a new policy (there’s no defaul policy in the shared authorization server):</p>

<ol>
  <li>In <strong>Security &gt; API</strong>, select the name of the authorization server you are configuring.</li>
  <li>Select <strong>Access Policies</strong>.</li>
  <li>Select <strong>Add New Access Policy</strong>.</li>
  <li>Enter a name and description, and choos whether to assign the policy to <strong>All clients</strong> or <strong>The following clients:</strong> (enter the client names).</li>
  <li>Select <strong>Create Policy</strong> to save your policy.</li>
  <li>Check that your new policy is highlighted, and select <strong>Add Rule</strong>.</li>
  <li>Enter a name for the rule.</li>
  <li>Select <strong>User is assigned this client</strong></li>
  <li>Select every custom scope name.</li>
  <li>Select <strong>Create Rule</strong>.</li>
</ol>

<h3 id="step-four-test-your-configuration">Step Four: Test Your Configuration</h3>

<p>Send an API request for a token to the old private authorization server and the new shared authorization server.
Both tokens should contain the same scope and custom claim information. The reserved claims are slightly different, such as <code class="highlighter-rouge">issuer</code>.</p>

<h3 id="step-five-change-your-clients-to-consume-the-new-endpoints">Step Five: Change Your Clients to Consume the New Endpoints</h3>

<p>Change the endpoints in your clients to the new well-known endpoint for the authorization server you created.</p>

<p>To change the well-known endpoint:</p>

<ol>
  <li>
    <p>Find the authorization server ID for your new authorization server. It’s displayed in the <strong>Metadata URI</strong> field of the
settings tab ( <strong>Security &gt; API &gt; Authorization Server</strong> ).</p>
  </li>
  <li>
    <p>Use the Discovery Document for <a href="/docs/api/resources/oidc.html#openid-connect-discovery-document">OpenID Connect clients</a>
and OAuth 2.0 clients to identify all endpoints that must be changed, as shown in the example below.
You’ll also see the JWKs, introspect and revoke endpoints.</p>
  </li>
  <li>
    <p>Find all the code you’ve written that references the authorization server in the endpoints returned by the discovery document. For example,
in the previous step, the following endpoints were identified: <code class="highlighter-rouge">/oauth2/v1/authorize</code>, <code class="highlighter-rouge">/oauth2/v1/token</code>, and <code class="highlighter-rouge">/oauth2/v1/userinfo</code>.</p>
  </li>
  <li>
    <p>For every instance in your code that references these endpoints, change them to match the endpoints in the well-known document.
change the common base URL for the OAuth endpoints described in the previous step. The URL formatting should stay the same (query parameters, client IDs, scopes, and other qualifiers),
just the base URL changes.</p>
  </li>
</ol>

<blockquote>
  <p>Hint: If you haven’t already, structure your code to make the ID of the authorization server a variable.
If you have different authorization servers for the app lifecycle (dev, test, prod) or want to move authorization servers
in the future, you can adjust a few variables.</p>
</blockquote>

<p>If you perform validation, change the validation to
check for the issuer, because the issuer is now a different authorization server.
Also change the validation to get the new public keys from the new JWKs endpoint.</p>

<p>Discovery Document Example for OpenID Connect clients:</p>

<p>Request:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>https://<span class="k">${</span><span class="nv">org</span><span class="k">}</span>.<span class="o">{</span>subdomain<span class="o">}</span>.com/.well-known/openid-configuration
</code></pre>
</div>

<p>Response:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">{</span>
  <span class="s2">"issuer"</span>: <span class="s2">"https://myOrg.example.com"</span>,
  <span class="s2">"authorization_endpoint"</span>: <span class="s2">"https://myOrg.example.com/oauth2/v1/authorize"</span>,
  <span class="s2">"token_endpoint"</span>: <span class="s2">"https://myOrg.example.com/oauth2/v1/token"</span>,
  <span class="s2">"userinfo_endpoint"</span>: <span class="s2">"https://myOrg.example.com/oauth2/v1/userinfo"</span>,
  <span class="s2">"jwks_uri"</span>: <span class="s2">"https://myOrg.example.com/oauth2/v1/keys"</span>,
  <span class="s2">"response_types_supported"</span>: <span class="o">[</span>
  <span class="s2">"code"</span>,
  <span class="s2">"id_token"</span>,
  <span class="s2">"token"</span>,
  <span class="s2">"code id_token"</span>,
  <span class="s2">"code token"</span>,
  <span class="s2">"id_token token"</span>,
  <span class="s2">"code id_token token"</span>
  <span class="o">]</span>,
  <span class="s2">"response_modes_supported"</span>: <span class="o">[</span>
    <span class="s2">"query"</span>,
    <span class="s2">"fragment"</span>,
    <span class="s2">"form_post"</span>,
    <span class="s2">"okta_post_message"</span>
  <span class="o">]</span>,
  <span class="s2">"grant_types_supported"</span>: <span class="o">[</span>
    <span class="s2">"authorization_code"</span>,
    <span class="s2">"implicit"</span>,
    <span class="s2">"refresh_token"</span>,
    <span class="s2">"password"</span>
  <span class="o">]</span>,
  <span class="s2">"subject_types_supported"</span>: <span class="o">[</span>
    <span class="s2">"public"</span>
  <span class="o">]</span>,
  <span class="s2">"id_token_signing_alg_values_supported"</span>: <span class="o">[</span>
    <span class="s2">"RS256"</span>
  <span class="o">]</span>,
  <span class="s2">"scopes_supported"</span>: <span class="o">[</span>
    <span class="s2">"openid"</span>,
    <span class="s2">"email"</span>,
    <span class="s2">"profile"</span>,
    <span class="s2">"address"</span>,
    <span class="s2">"phone"</span>,
    <span class="s2">"offline_access"</span>,
    <span class="s2">"groups"</span>
  <span class="o">]</span>,
  <span class="s2">"token_endpoint_auth_methods_supported"</span>: <span class="o">[</span>
    <span class="s2">"client_secret_basic"</span>,
    <span class="s2">"client_secret_post"</span>,
    <span class="s2">"none"</span>
  <span class="o">]</span>,
  <span class="s2">"claims_supported"</span>: <span class="o">[</span>
    <span class="s2">"iss"</span>,
    <span class="s2">"sub"</span>,
    <span class="s2">"aud"</span>,
    <span class="s2">"iat"</span>,
    <span class="s2">"exp"</span>,
    <span class="s2">"auth_time"</span>,
    <span class="s2">"amr"</span>,
    <span class="s2">"idp"</span>,
    <span class="s2">"nonce"</span>,
    <span class="s2">"name"</span>,
    <span class="s2">"nickname"</span>,
    <span class="s2">"preferred_username"</span>,
    <span class="s2">"given_name"</span>,
    <span class="s2">"middle_name"</span>,
    <span class="s2">"family_name"</span>,
    <span class="s2">"email"</span>,
    <span class="s2">"email_verified"</span>,
    <span class="s2">"profile"</span>,
    <span class="s2">"zoneinfo"</span>,
    <span class="s2">"locale"</span>,
    <span class="s2">"address"</span>,
    <span class="s2">"phone_number"</span>,
    <span class="s2">"updated_at"</span>
  <span class="o">]</span>,
  <span class="s2">"code_challenge_methods_supported"</span>: <span class="o">[</span>
    <span class="s2">"S256"</span>
  <span class="o">]</span>,
  <span class="s2">"introspection_endpoint"</span>: <span class="s2">"https://myOrg.example.com/oauth2/aus8nsuk51LdfcfZM0h7/v1/introspect"</span>,
  <span class="s2">"introspection_endpoint_auth_methods_supported"</span>: <span class="o">[</span>
    <span class="s2">"client_secret_basic"</span>,
    <span class="s2">"client_secret_post"</span>,
    <span class="s2">"none"</span>
  <span class="o">]</span>,
  <span class="s2">"revocation_endpoint"</span>: <span class="s2">"https://myOrg.example.com/oauth2/aus8nsuk51LdfcfZM0h7/v1/revoke"</span>,
  <span class="s2">"revocation_endpoint_auth_methods_supported"</span>: <span class="o">[</span>
    <span class="s2">"client_secret_basic"</span>,
    <span class="s2">"client_secret_post"</span>,
    <span class="s2">"none"</span>
  <span class="o">]</span>
<span class="o">}</span>

</code></pre>
</div>

<p>Discovery Document Example for OAuth 2.0 clients:</p>

<p>Request:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>https://<span class="k">${</span><span class="nv">org</span><span class="k">}</span>.<span class="o">{</span>subdomain<span class="o">}</span>.com/oauth2/<span class="o">{</span>asId<span class="o">}</span>/.well-known/oauth-authorization-server
</code></pre>
</div>

<p>Response:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">{</span>
  <span class="s2">"issuer"</span>: <span class="s2">"https://myOrg.example.com/oauth2/aus8nsuk51LdfcfZM0h7"</span>,
  <span class="s2">"authorization_endpoint"</span>: <span class="s2">"https://myOrg.example.com/oauth2/aus8nsuk51LdfcfZM0h7/v1/authorize"</span>,
  <span class="s2">"token_endpoint"</span>: <span class="s2">"https://myOrg.example.com/oauth2/aus8nsuk51LdfcfZM0h7/v1/token"</span>,
  <span class="s2">"jwks_uri"</span>: <span class="s2">"https://myOrg.example.com/oauth2/aus8nsuk51LdfcfZM0h7/v1/keys"</span>,
  <span class="s2">"response_types_supported"</span>: <span class="o">[</span>
    <span class="s2">"code"</span>,
    <span class="s2">"token"</span>,
    <span class="s2">"code token"</span>
  <span class="o">]</span>,
  <span class="s2">"response_modes_supported"</span>: <span class="o">[</span>
    <span class="s2">"query"</span>,
    <span class="s2">"fragment"</span>,
    <span class="s2">"form_post"</span>,
    <span class="s2">"okta_post_message"</span>
  <span class="o">]</span>,
  <span class="s2">"grant_types_supported"</span>: <span class="o">[</span>
    <span class="s2">"authorization_code"</span>,
    <span class="s2">"implicit"</span>,
    <span class="s2">"refresh_token"</span>,
    <span class="s2">"password"</span>
  <span class="o">]</span>,
  <span class="s2">"subject_types_supported"</span>: <span class="o">[</span>
    <span class="s2">"public"</span>
  <span class="o">]</span>,
  <span class="s2">"scopes_supported"</span>: <span class="o">[</span>
    <span class="s2">"offline_access"</span>,
    <span class="s2">"Scope2"</span>,
    <span class="s2">"Scope1"</span>
  <span class="o">]</span>,
  <span class="s2">"token_endpoint_auth_methods_supported"</span>: <span class="o">[</span>
    <span class="s2">"client_secret_basic"</span>,
    <span class="s2">"client_secret_post"</span>,
    <span class="s2">"none"</span>
  <span class="o">]</span>,
  <span class="s2">"code_challenge_methods_supported"</span>: <span class="o">[</span>
    <span class="s2">"S256"</span>
  <span class="o">]</span>,
  <span class="s2">"introspection_endpoint"</span>: <span class="s2">"https://myOrg.example.com/oauth2/aus8nsuk51LdfcfZM0h7/v1/introspect"</span>,
  <span class="s2">"introspection_endpoint_auth_methods_supported"</span>: <span class="o">[</span>
    <span class="s2">"client_secret_basic"</span>,
    <span class="s2">"client_secret_post"</span>,
    <span class="s2">"none"</span>
  <span class="o">]</span>,
  <span class="s2">"revocation_endpoint"</span>: <span class="s2">"https://myOrg.example.com/oauth2/aus8nsuk51LdfcfZM0h7/v1/revoke"</span>,
  <span class="s2">"revocation_endpoint_auth_methods_supported"</span>: <span class="o">[</span>
    <span class="s2">"client_secret_basic"</span>,
    <span class="s2">"client_secret_post"</span>,
    <span class="s2">"none"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>If you don’t get a successful test in <a href="#step-four-test-your-configuration">Step Four</a>,
check for the following symptoms and try the resolutions.</p>

<h3 id="symptom-1-some-requests-still-using-the-old-base-url">Symptom 1: Some requests still using the old base URL</h3>

<p>Did you hard-code the base URL anywhere? If so, remove the hard-coding.</p>

<h3 id="symptom-2-some-requests-dont-return-the-results-expected-in-a-token">Symptom 2: Some requests don’t return the results expected in a token</h3>

<ul>
  <li>Check that the client and shared authorization server configuration match.</li>
  <li>Check the system log for additional details about any errors.</li>
</ul>

      </div>
      <div class="TableOfContents TableOfContentsPreload">
        <div class="TableOfContents-item is-level1">
          <script>
                  document.write(document.title.split('|')[0].trim());
          </script>
        </div>
        <div class="TableOfContentsLoader"></div>
      </div><!-- END Page Content -->
    </section><!-- END Page Center w/Sub Nav & Content -->

    <!-- START Footer -->
    <footer class="footer">
      <div class="Wrap">
        <ul>
          <li>
            <a href="https://www.okta.com" target="_blank">Okta.com</a>
          </li>
          <li>
            <a href="/blog/">Blog</a>
          </li>
          <li>
            <a href="/docs/platform-release-notes/platform-release-notes.html">Platform Release Notes</a>
          </li>
          <li>
            <a href="/terms/">Terms & Conditions</a>
          </li>
          <li>
            <a href="/3rd_party_notices/">3rd Party Notices</a>
          </li>
          <li>
            <a href="/privacy/">Privacy Policy</a>
          </li>
          <li>
            <a href="/contact/">Contact Sales</a>
          </li>
          <li>
            <a href="mailto:developers@okta.com">Contact Support</a>
          </li>
        </ul>
        <ul>
          <li>
            <a class="icon" href="http://github.com/oktadeveloper" target="_blank"><i class="fa fa-github"></i></a>
          </li>
          <li>
            <a class="icon" href="http://twitter.com/okta" target="_blank"><i class="fa fa-twitter"></i></a>
          </li>
          <li>
            <a class="icon" href="https://devforum.okta.com/" title="Okta Developer Forums" target="_blank"><i class="fa fa-comments"></i></a>
          </li>
          <li>
            <a class="icon" href="http://feeds.feedburner.com/OktaBlog" target="_blank"><i class="fa fa-rss"></i></a>
          </li><!-- <li><a class="icon" href="http://community.okta.com" target="_blank"><i class="fa fa-comments"></i></a></li> -->
        </ul>
      </div>
    </footer>
    <script type="text/javascript" src="/assets/master-d164e3cb90ad42ea74c141546269db0efdbc2259b7d44b7f52babb60097099a8.js"></script>
    
    
    
    
      <script type="text/javascript" src="/assets/docs-a2d1c410ee8c45eaa505f76f4f72815741c3bb6532081ae1abe25e3d8d00f4fa.js"></script>
    
    <!-- Remarketing tag -->
    <script type="text/javascript">
        /* <![CDATA[ */
        var google_conversion_id = 1006913831;
        var google_custom_params = window.google_tag_params;
        var google_remarketing_only = true;
        /* ]]> */
    </script>
    <div style="display:none;">
      <script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script>
    </div>
    <noscript>
      <div style="display:inline;">
        <img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0">
      </div>
    </noscript>
    <!-- End Remarketing tag -->
    <!-- Crazy Egg Tracking -->
    <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
    </script>
    <!-- End Crazy Egg Tracking -->

     <!-- END Footer -->
  </div>
</body>
</html>
